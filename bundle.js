!function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var a=i(1),s=n(a),r=i(2),o=n(r),l=i(3),u=n(l),c=i(4),h=n(c),d=i(5),g=n(d),f=i(6),m=n(f);i(7),function(){function t(){k.render(),T.renderIntro(),document.body.classList.add(M),d(),n(),r()}function e(t){b.state.appElement.classList.add(S),i(),z.init(b,t),f(),l(document.querySelector("footer")),p(),v()}function i(){j.solveButton.classList.remove(G),w.init(b),b.setProperty("grid",w.shuffledGrid),b.setProperty("goalGrid",w.goalGrid),b.setProperty("emptyTile",w.emptyTile),j.init(b.state),c()}function n(){var t=document.querySelector(".puzzle-list");t.addEventListener("click",function(t){var i=t.target.getAttribute("id");document.body.classList.add(M),e(i)})}function a(){j.solveButton.classList.add(G),j.hintButton.classList.add(G),w.retryButton.classList.add(G)}function r(){document.querySelector(".configure-puzzle").addEventListener("click",function(t){var e=t.target;if("radio"===e.type){var i=e.getAttribute("name"),n=e.getAttribute("id");b.setProperty(i,n)}})}function l(t){t.querySelector(".retry-button").addEventListener("click",function(t){b.state.appElement.removeChild(z.canvas),j.hintButton.classList.remove(G),w.retryButton.classList.remove(G),i(),z.init(b),I=0,t.target.classList.contains("in-modal")&&T.modal.classList.remove(E)})}function c(){var t=j.hintButton.textContent;j.hintButton.addEventListener("click",function(e){var i,n,a=b.getAllowableMoves(b.state.emptyTile,b.state.grid),s=[];for(i=0;i<a.length;i++){var r=j.makeFringeGrid(a[i],b.state.grid.slice(),b.state.emptyTile.slice()),o=j.evaluation(r.grid,b.state.goalGrid,1);s.push({rank:o,move:i})}s=j.sort(s,"rank"),n=a[s[0].move][1],j.hintButton.innerHTML="GO "+n+"!",setTimeout(function(){j.hintButton.innerHTML=t},1500)})}function d(){document.querySelector(".modal-close").addEventListener("click",function(t){T.modal.classList.remove(E),document.body.classList.remove(M)})}function f(){j.solveButton.addEventListener("click",function(t){var e,i=0;return a(),j.solve(b.state.grid,b.state.goalGrid,b.state.emptyTile),"fail"===j.solution?(T.renderError(),void l(T.modal)):void(e=setInterval(function(){if(void 0!==j.solution){if(i>=j.solution.length)return clearInterval(e),void setTimeout(function(){T.renderSolved(j.solution.length),l(T.modal)},O);z.redrawMovedTile(j.solution[i].tile,j.solution[i].direction),i++}},300))})}function p(){b.state.appElement.addEventListener("click",function(t){var e=b.getAllowableMoves(b.state.emptyTile,b.state.grid),i=z.moveTile(t,e);if(i!==!1){var n=i[0],s=i[2],r=b.state.emptyTile;I++,b.state.emptyTile=n,b.state.grid[s]=r,j.isSameArray(b.state.grid,b.state.goalGrid)&&setTimeout(function(){T.renderWinning(I),a(),l(T.modal),I=0},O)}})}function v(){window.addEventListener("resize",function(){clearTimeout(y),y=setTimeout(function(){b.state.appElement.removeChild(z.canvas),z.init(b)},400)})}var y,_={gridSize:4,shuffleTimes:30,appElement:document.getElementById("app"),puzzleConfig:{player:"Broseph",size:[{name:"3 by 3",value:3},{name:"4 by 4",value:4},{name:"5 by 5",value:5}],shuffle:[{name:"A little - 15",value:15},{name:"An amount - 30",value:30},{name:"The limit at which my solver consistently works - 50",value:50}]},canvas:[{image:"/images/sc4a.jpg",name:"art"},{image:"/images/sc4a.jpg",name:"art"},{image:"/images/cat1.jpg",name:"cat!"},{image:"/images/cat.jpg",name:"cat!"},{image:"/images/bear-shark-unicornsurfing.jpg",name:"surfing"},{image:"/images/bear-shark-unicornsurfing.jpg",name:"surfing"},{image:"/images/sc4a.jpg",name:"art"},{image:"/images/cat.jpg",name:"cat!"},{image:"/images/cat1.jpg",name:"cat!"},{image:"/images/cat.jpg",name:"cat!"},{image:"/images/small-cat.png",name:"smaller cat"},{image:"/images/cat1.jpg",name:"cat!"},{image:"/images/ps-battle1.jpg",name:"cat!"},{image:"/images/ps-battle1.jpg",name:"cat!"},{image:"/images/sc4a.jpg",name:"art"},{image:"/images/cat1.jpg",name:"cat!"},{image:"/images/cat.jpg",name:"cat!"},{image:"/images/small-cat.png",name:"smaller cat"},{image:"/images/pretty.jpg",name:"cat!"},{image:"/images/sc4a.jpg",name:"art"},{image:"/images/cat.jpg",name:"cat!"},{image:"/images/shmeh.jpg",name:"cat!"},{image:"/images/shmeh.jpg",name:"cat!"},{image:"/images/pretty.jpg",name:"smaller cat"},{image:"/images/shmeh.jpg",name:"cat!"},{image:"/images/ps-battle1.jpg",name:"cat!"},{image:"/images/shmeh.jpg",name:"cat!"},{image:"/images/cat.jpg",name:"cat!"},{image:"/images/ps-battle1.jpg",name:"cat!"},{image:"/images/shmeh.jpg",name:"cat!"},{image:"/images/cat.jpg",name:"cat!"},{image:"/images/small-cat.png",name:"smaller cat"},{image:"/images/bear-shark-unicornsurfing.jpg",name:"surfing"}]},b=new s["default"](_),k=new o["default"](b),T=new u["default"](b),w=new g["default"](b),z=new h["default"](b),j=new m["default"](b),I=0,M="_locked",E="_open",G="_hidden",S="_puzzle-time",O=200;t()}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){i(this,t),this.state=e||{}}return n(t,[{key:"set",value:function(t){this.state=t}},{key:"setProperty",value:function(t,e){this.state[t]=e}},{key:"get",value:function(){return this.state}},{key:"getAllowableMoves",value:function(t,e){var i,n,a,s,r,o,l,u,c=[],h=t[0],d=t[1];for(i=0;i<e.length;i++)a=e[i][0],n=e[i][1],l=a-h,u=n-d,s=d===n&&1===Math.abs(l),r=h===a&&1===Math.abs(u),(s||r)&&(s&&(o=this.getDirection(l,"x")),r&&(o=this.getDirection(u,"y")),c.push([e[i],o,i]));return c}},{key:"getDirection",value:function(t,e){var i;return"y"===e?i=-1===t?"DOWN":"UP":"x"===e&&(i=-1===t?"RIGHT":"LEFT"),i}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){i(this,t),this.state=e.state||{},this.puzzles=[],this.selectedPuzzle,this._images=this._getImages(this.state.canvas)}return n(t,[{key:"render",value:function(){var t=document.createElement("section"),e='\n            <ul class="puzzle-list">\n              '+this._images.map(function(t){return'\n                <li class="puzzle" style="background-image:url('+t+')" id="'+t+'">\n                </li>'}).join("\n")+"\n            </ul>\n        ";t.setAttribute("class","select-puzzle"),t.innerHTML=e,this.state.appElement.appendChild(t)}},{key:"_getImages",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i.push(t[e].image);return i}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){i(this,t),this.state=e.state||{},this.puzzleConfig=this.state.puzzleConfig,this.modal}return n(t,[{key:"_render",value:function(t,e){void 0===this.modal&&(this.modal=document.createElement("section")),this.modal.setAttribute("class","modal _open "+e),this.modal.innerHTML=t,this.state.appElement.appendChild(this.modal)}},{key:"renderWinning",value:function(t){var e="\n      <h1>A winner is you!</h1>\n\n      <p>You did it in an astonishing "+t+" "+(t>1?"steps":"step")+'.</p>\n\n      <p>Try again?!?!?</p>\n\n      <button id="retry" class="button retry-button in-modal">RETRY</button>\n    ';this._render(e,"modal-solved")}},{key:"renderSolved",value:function(t){var e="\n      <h1>You were so close!</h1>\n\n      <p>It took us "+t+" "+(t>1?"moves":"move")+' to solve</p>\n\n      <p>Try again?!?!?</p>\n\n      <button id="retry" class="button retry-button in-modal">RETRY</button>\n    ';this._render(e,"modal-solved")}},{key:"renderError",value:function(){var t='\n      <h1>I have failed you sempai</h1>\n\n      <p>Try again?!?!?</p>\n\n      <button id="retry" class="button retry-button in-modal">RETRY</button>\n    ';this._render(t,"modal-solved")}},{key:"renderIntro",value:function(){var t=this,e=this._getMap(this.puzzleConfig.size),i=this._getMap(this.puzzleConfig.shuffle),n='\n        <h1>Slider Puzzle!</h1>\n\n        <form>\n          <fieldset class="configure-puzzle">\n            <legend>configure your puzzle</legend>\n            <!--<p>\n              Hi there <input type="text" placeholder="'+this.puzzleConfig.player+'" />\n            </p>-->\n            <ul>\n              '+e.map(function(e){return"\n                <li>\n                  <input "+t._seeIfChecked(e,"gridSize")+' name="gridSize" type="radio" id="'+e.toString().split(",")[1]+'">\n                  <label for="'+e.toString().split(",")[1]+'">\n                    '+e.toString().split(",")[0]+"\n                  </label>\n                </li>"}).join("\n")+"\n            </ul>\n\n            <ul>\n              "+i.map(function(e){return"\n                <li>\n                  <input "+t._seeIfChecked(e,"shuffleTimes")+' name="shuffleTimes" type="radio" id="'+e.toString().split(",")[1]+'">\n                  <label for="'+e.toString().split(",")[1]+'">\n                    '+e.toString().split(",")[0]+"\n                  </label>\n                </li>"}).join("\n")+'\n            </ul>\n          </fieldset>\n\n          <button class="play modal-close" type="button">\n            Looks good to me\n          </button>\n        </form>\n    ';this._render(n,"intro")}},{key:"_seeIfChecked",value:function(t,e){var i=t[0][1]===this.state[e];return i?"checked=checked":""}},{key:"_getMap",value:function(t){var e,i,n=[];for(e=0;e<t.length;e++){var a=t[e],s=[];for(i in a)s.push(a[i]);n.push([s])}return n}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){i(this,t),this.app=e||{},this.state=e.state||{},this.canvas,this.context,this.imageObj,this.selectedImage,this._moveIteration=0,this._totalMoveIterations=10,this._tilesIteration=0,this._totalTilesIterations=100,this.gridSize,this._width=0,this._height=0,this._tileWidth=0,this._tileHeight=0,this._bgOffsetY=0,this._bgOffsetX=0,this._directionLookup={UP:-1,DOWN:1,LEFT:-1,RIGHT:1}}return n(t,[{key:"init",value:function(t,e){this.gridSize=t.state.gridSize,this.canvas=this._createCanvas(),this.context=this.canvas.getContext("2d"),this.selectedImage=e||this.selectedImage,this._loadImage(this.selectedImage)}},{key:"moveTile",value:function(t,e){var i=t.layerX,n=t.layerY,a=this._getTile(i,n),s=this._getValidMove(a,e);return s!==!1&&this.redrawMovedTile(a,s[1]),s}},{key:"redrawMovedTile",value:function(t,e){var i,n=this,a=e,s=0,r=0;"UP"===a||"DOWN"===a?(i=this._easeInOutQuad(this._moveIteration,0,this._tileHeight,this._totalMoveIterations),s=this._directionLookup[a]*i):(i=this._easeInOutQuad(this._moveIteration,0,this._tileWidth,this._totalMoveIterations),r=this._directionLookup[a]*i),this.context.closePath(),this.context.clearRect(this._tileWidth*t[0],this._tileHeight*t[1],this._tileWidth,this._tileHeight),this.context.drawImage(this.imageObj,this._tileWidth*this.state.goalGrid[t[2]][0]-this._bgOffsetX,this._tileHeight*this.state.goalGrid[t[2]][1]-this._bgOffsetY,this._tileWidth,this._tileHeight,this._tileWidth*t[0]+r,this._tileHeight*t[1]+s,this._tileWidth,this._tileHeight),this._moveIteration<this._totalMoveIterations?(this._moveIteration++,requestAnimationFrame(function(){return n.redrawMovedTile(t,e)})):this._moveIteration=0}},{key:"drawFrame",value:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;e>n;n++)i[n-1]=arguments[n];this._iteration<this._totalIterations?(this._iteration++,requestAnimationFrame(function(){return t.apply(void 0,i)})):this._iteration=0}},{key:"_drawTiles",value:function(t,e){var i=this,n=0,a=0,s=0;this.context.globalAlpha=1,this.context.save();var r=this._easeInOutQuad(this._tilesIteration,0,1,this._totalTilesIterations);for(this._bgOffsetX=0>e?e:0,this._bgOffsetY=0>t?t:0,a=0;a<this.gridSize;a++)for(n=0;n<this.gridSize;n++){var o=0===a&&0===n?1/1.5+1/1.5:n/2.5+a/2.5;this.context.globalAlpha=o*r;var l,u,c;s<this.state.grid.length&&(this.context.beginPath(),this.context.stroke(),l=this.state.grid[s],u=l[0],c=l[1],this.context.drawImage(this.imageObj,this._tileWidth*n-this._bgOffsetX,this._tileHeight*a-this._bgOffsetY,this._tileWidth,this._tileHeight,this._tileWidth*u,this._tileHeight*c,this._tileWidth,this._tileHeight)),s++}this.context.restore(),this._tilesIteration<this._totalTilesIterations?(this._tilesIteration++,requestAnimationFrame(function(){return i._drawTiles(t,e)})):this._tilesIteration=0}},{key:"_getTile",value:function(t,e){var i=Math.floor(t/this._tileWidth),n=Math.floor(e/this._tileHeight),a=this._findArraysIndex(this.state.grid,[i,n]);return[i,n,a]}},{key:"_findArraysIndex",value:function(t,e){for(var i=0,n=t.length;n>i;i++)if(e[0]===t[i][0]&&e[1]===t[i][1])return i;return-1}},{key:"_getValidMove",value:function(t,e){var i,n=t[2],a=!1;return e.forEach(function(t){return i=t[2],n===i?void(a=t):void 0}),a}},{key:"_createCanvas",value:function(){var t=document.createElement("canvas");return t.setAttribute("class","scene"),this.state.appElement.appendChild(t),t}},{key:"_easeInOutQuad",value:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},{key:"_loadImage",value:function(t){var e=this;this.imageObj=new Image,this.imageObj.onload=function(){var t=e.imageObj,i=t.width,n=t.height,a=e.state.appElement,s=a.offsetWidth<i,r=a.offsetHeight<n,o=(a.offsetHeight-n)/2,l=(a.offsetWidth-i)/2;s?(e.canvas.classList.add("small-x"),e.canvas.style.top=r?0:o+"px"):(e.canvas.classList.remove("small-x"),e.canvas.style.top="auto"),e._width=s?a.offsetWidth:i,e._height=r?a.offsetHeight:n,e._tileWidth=e._width/e.gridSize,e._tileHeight=e._height/e.gridSize,e.canvas.setAttribute("height",e._height),e.canvas.setAttribute("width",e._width),e._drawTiles(o,l)},this.imageObj.src=t}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){i(this,t),this.app,this.gridSize,this.goalGrid,this.shuffledGrid,this.emptyTile,this.allowableMoves,this.shuffleMoves,this.lastDirection,this.retryButton}return n(t,[{key:"init",value:function(t){this.app=t||{},this.gridSize=t.state.gridSize||{},this.retryButton=document.querySelector("footer").querySelector(".retry-button"),this.emptyTile=[this.gridSize-1,this.gridSize-1],this.goalGrid=this._createGrid(this.gridSize),this.shuffledGrid=this._shuffle(this.goalGrid.slice(),t.state.shuffleTimes)}},{key:"_createGrid",value:function(t){var e,i,n=[];for(e=0;t>e;e++)for(i=0;t>i;i++)n.push([i,e]);return n.pop(),n}},{key:"_shuffle",value:function(t,e){for(var i=0,n=e;n>i;i++)this.allowableMoves=this.app.getAllowableMoves(this.emptyTile,t),t=this._moveToRandomTile(t,this.allowableMoves);return t}},{key:"_moveToRandomTile",value:function(t,e){var i=e[Math.floor(Math.random()*e.length)],n=i[1],a=i[2],s=t[a];return this.lastDirection=n,t[a]=this.emptyTile,this.emptyTile=s,t}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e,n){i(this,t),this.app=e,this.state=e.state||{},this.gridLogic=n,this.solveButton=document.querySelector(".solve-button"),this.hintButton=document.querySelector(".hint-button"),this.closedGrids=[],this.emptyFringeTile,this.solution=[],this.steps=0}return n(t,[{key:"init",value:function(t){this.openGrids=[{grid:t.grid,rank:0,emptyTile:t.emptyTile,direction:"none",tileMoved:"none",tileMovedPosition:"none",solution:[]}]}},{key:"solve",value:function(t,e,i){var n=this;this.steps++;var a=this.openGrids.shift();if(this.steps>3e3)return this.solution="fail",void console.log("sad trombone","OPEN",this.openGrids,"CLOSED",this.closedGrids);if(this.isSameArray(a.grid,this.state.goalGrid))return this.solution=a.solution,void console.log("WE DID IT IN "+a.solution.length);this.emptyFringeTile=i;var s,r,o=this.makeFringe(i,a,e);o.forEach(function(t){r=n.closedGrids.some(function(e){return n.isSameArray(t.grid,e.grid)}),s=n.openGrids.some(function(e){return n.isSameArray(t.grid,e.grid)}),s&&n._cleanOpenGrids(t),s||r||n.openGrids.push(t)}),this.openGrids=this.sort(this.openGrids.slice(),"rank"),this.closedGrids.push(a),0!==this.openGrids.length&&this.solve(this.openGrids[0].grid,e,this.openGrids[0].emptyTile)}},{key:"makeFringe",value:function(t,e,i){var n,a=this,s=e.grid,r=this.app.getAllowableMoves(t,s),o=e.solution,l=[];return r.forEach(function(t){var e=a.makeFringeGrid(t,s.slice(),a.emptyFringeTile),r=e.grid,u=e.emptyTile,c=t[1],h=t[2],d=t[0];n=a.evaluation(r,i,o.length),l.push({grid:r,rank:n,emptyTile:u,direction:c,tileMoved:h,tileMovedPosition:d,solution:a._addPath(d,h,c,o)})}),l}},{key:"_addPath",value:function(t,e,i,n){var a=[t[0],t[1],e],s={tile:a,direction:i};if(0===n.length)return[s];var r=n.slice();return r.push(s),r}},{key:"_cleanOpenGrids",value:function(t){var e=this;this.openGrids.forEach(function(i){e.isSameArray(t.grid,i.grid)&&t.solution.length<i.solution.length&&(i.solution=t.solution)})}},{key:"_cleanClosedGrids",value:function(t){var e=this;this.closedGrids.forEach(function(i,n){if(e.isSameArray(t.grid,i.grid)&&t.solution.length<i.solution.length){var a=e.closedGrids.splice(n,1);e.openGrids.push(a)}})}},{key:"isSameArray",value:function(t,e){return t.length===e.length&&t.every(function(t,i){return t===e[i]})}},{key:"evaluation",value:function(t,e,i){return this._getDistance(t,e)+i}},{key:"_getDistance",value:function(t,e){var i,n=0;return t.forEach(function(t,a){i=Math.abs(t[0]-e[a][0])+Math.abs(t[1]-e[a][1]),0!==i&&(n+=1),n+=i}),n}},{key:"makeFringeGrid",value:function(t,e,i){var n=t[2],a=e[n];return e[n]=i,{grid:e,emptyTile:a}}},{key:"sort",value:function(t,e){return t.sort(function(t,i){return t[e]-i[e]})}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e){}]);